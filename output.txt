Compiling 5 files with Solc 0.8.28
Solc 0.8.28 finished in 3.15s
Compiler run successful with warnings:
Warning (6269): Unexpected NatSpec tag "notice" with value "fundData = abi.encode(funder, funderSignature, encodedFundTransfers) This gives a calldata layout of: 0x00: funder (20 bytes, left padded to 32 bytes) 0x20: offset to funderSignature (32 bytes) - we skip this and assume its location at 0x60 0x40: offset to encodedFundTransfers (32 bytes) - we skip this and assume its location at 0x60 + funderSignature.length + 0x20 0x60: funderSignature length (32 bytes)" in inline assembly.
   --> src/libraries/IntentHelpers.sol:146:9:
    |
146 |         assembly ("memory-safe") {
    |         ^ (Relevant source part starts here and spans across multiple lines).

Warning (2072): Unused local variable.
   --> test/Base.t.sol:106:9:
    |
106 |         bool isMultichain = i.nonce >> 240 == oc.MULTICHAIN_NONCE_PREFIX();
    |         ^^^^^^^^^^^^^^^^^


Ran 1 test for test/Orchestrator.t.sol:OrchestratorTest
[PASS] testMultiChainIntent() (gas: 7809412)
Logs:
  === Starting testMultiChainIntent ===
  Orchestrator address: 0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
  === Setup complete, starting Base chain test ===
  Chain ID set to Base (8453)
  Minted 600 USDC on Base to EOA: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  settler bytes
  0x
  Encoded intent for Base chain
  About to execute Base intent with gas wallet: 0xDfF4F4D696B17ae2584BdFCC2267FaAD6273e0D5
  === _execute called ===
  Combined gas: 1000000
  EOA address: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  About to perform self-call verification
  Payment amount: 0
  Payment max amount: 0
  Payment token: 0x0000000000000000000000000000000000000000
  Payer: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  === selfCallPayVerifyCall537021665 called ===
  Flags: 0
  Intent expiry: 0
  Current timestamp: 1
  Expiry check passed
  Digest computed
  0x
  Funding (if any) handled
  Pre-calls (if any) handled
  === _verifyMerkleSig called ===
  Digest: 74859474678888188617380288673970857584594653592284654112922080803390654359145
  EOA: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  Root: 64951599711642836395008437169926985007912410163784470381469641460806468654311
  Merkle proof valid: true
  Signature valid: true
  test merkle verification
  test merkle verification done
  Signature verified, nonce checked and incremented
  Payment (if any) handled
  Self-call completed, success: true
  Error code from self-call: 0
  Self-call successful, gas used: 361343
  Base intent execution result: 0
  === Base intent execution successful ===
  Checking Base escrow balances...
  Escrow balance: 600
  Relay balance: 0
  Base escrow verification passed
  === Starting Arbitrum chain test ===
  Chain ID set to Arbitrum (42161)
  Minted 500 USDC on Arbitrum to EOA: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  Testing negative case: sending Base intent to Arbitrum
  settler bytes
  0x
  === _execute called ===
  Combined gas: 1000000
  EOA address: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  About to perform self-call verification
  Payment amount: 0
  Payment max amount: 0
  Payment token: 0x0000000000000000000000000000000000000000
  Payer: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  === selfCallPayVerifyCall537021665 called ===
  Flags: 0
  Intent expiry: 0
  Current timestamp: 1
  Expiry check passed
  Digest computed
  0x
  Funding (if any) handled
  Pre-calls (if any) handled
  === _verifyMerkleSig called ===
  Digest: 83826402280965426958287695512746334374321031608835504356004433376165231044813
  EOA: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  Root: 64951599711642836395008437169926985007912410163784470381469641460806468654311
  Merkle proof valid: false
  test merkle verification
  test merkle verification done
  Self-call completed, success: false
  Error code from self-call: 113889272269676916888644704705387054184024556500035726267922489934275172892672
  Self-call FAILED
  Base intent on Arb result: 113889272269676916888644704705387054184024556500035726267922489934275172892672
  Negative case passed - Base intent correctly failed on Arbitrum
  settler bytes
  0x
  === _execute called ===
  Combined gas: 1000000
  EOA address: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  About to perform self-call verification
  Payment amount: 0
  Payment max amount: 0
  Payment token: 0x0000000000000000000000000000000000000000
  Payer: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  === selfCallPayVerifyCall537021665 called ===
  Flags: 0
  Intent expiry: 0
  Current timestamp: 1
  Expiry check passed
  Digest computed
  0x
  Funding (if any) handled
  Pre-calls (if any) handled
  === _verifyMerkleSig called ===
  Digest: 67288666367067667322596237506086925454397762939269763074857257945457438146043
  EOA: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  Root: 64951599711642836395008437169926985007912410163784470381469641460806468654311
  Merkle proof valid: false
  test merkle verification
  test merkle verification done
  Self-call completed, success: false
  Error code from self-call: 113889272269676916888644704705387054184024556500035726267922489934275172892672
  Self-call FAILED
  === Executing correct Arbitrum intent ===
  settler bytes
  0x
  About to execute Arbitrum intent with gas wallet: 0xDfF4F4D696B17ae2584BdFCC2267FaAD6273e0D5
  === _execute called ===
  Combined gas: 1000000
  EOA address: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  About to perform self-call verification
  Payment amount: 0
  Payment max amount: 0
  Payment token: 0x0000000000000000000000000000000000000000
  Payer: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  === selfCallPayVerifyCall537021665 called ===
  Flags: 0
  Intent expiry: 0
  Current timestamp: 1
  Expiry check passed
  Digest computed
  0x
  Funding (if any) handled
  Pre-calls (if any) handled
  === _verifyMerkleSig called ===
  Digest: 67288666367067667322596237506086925454397762939269763074857257945457438146043
  EOA: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  Root: 64951599711642836395008437169926985007912410163784470381469641460806468654311
  Merkle proof valid: true
  Signature valid: true
  test merkle verification
  test merkle verification done
  Signature verified, nonce checked and incremented
  Payment (if any) handled
  Self-call completed, success: true
  Error code from self-call: 0
  Self-call successful, gas used: 361343
  Arbitrum intent execution result: 0
  === Arbitrum intent execution successful ===
  Checking Arbitrum escrow balances...
  Arb Escrow balance: 500
  Arb Relay balance: 0
  Arbitrum escrow verification passed
  === Starting Mainnet (output) chain test ===
  Chain ID set to Mainnet (1)
  Minted 1000 USDC on Mainnet to relay: 0x0b1919FC951C05c5Ca2846C450C842f41FB4bA48
  Minted 1000 USDC to funder: 0xa0Cb889707d426A7A386870A03bc70d1b0697598
  === Executing output intent on Mainnet ===
  settler bytes
  0x0000000000000000000000001d1499e622d69689cdf9004d05ec547d650ff21100000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000002105000000000000000000000000000000000000000000000000000000000000a4b1
  About to execute output intent with gas wallet: 0xDfF4F4D696B17ae2584BdFCC2267FaAD6273e0D5
  === _execute called ===
  Combined gas: 1000000
  EOA address: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  About to perform self-call verification
  Payment amount: 0
  Payment max amount: 0
  Payment token: 0x0000000000000000000000000000000000000000
  Payer: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  === selfCallPayVerifyCall537021665 called ===
  Flags: 0
  Intent expiry: 0
  Current timestamp: 1
  Expiry check passed
  Digest computed
  0x000000000000000000000000a0cb889707d426a7a386870a03bc70d1b0697598000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000004174be00c6f95c7dbd273644d75bf4babec04ea778542e93e5c658e48195126e417086458001f067cd4c2b805fa6a1481eae75461a4049dedaf4f0dcbd4279591b1c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004000000000000000000000000003a6a84cd762d9707a21605b548aaab891562aab00000000000000000000000000000000000000000000000000000000000003e8
  0xa0Cb889707d426A7A386870A03bc70d1b0697598
  0x74be00c6f95c7dbd273644d75bf4babec04ea778542e93e5c658e48195126e417086458001f067cd4c2b805fa6a1481eae75461a4049dedaf4f0dcbd4279591b1c
  Number of transfers: 1
  0x00000000000000000000000003a6a84cd762d9707a21605b548aaab891562aab00000000000000000000000000000000000000000000000000000000000003e8
  Funding (if any) handled
  Pre-calls (if any) handled
  === _verifyMerkleSig called ===
  Digest: 106099918207397525055289558602140558200070118096090283154322783089408239193741
  EOA: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  Root: 64951599711642836395008437169926985007912410163784470381469641460806468654311
  Merkle proof valid: true
  Signature valid: true
  test merkle verification
  0x0000000000000000000000001d1499e622d69689cdf9004d05ec547d650ff21100000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000002105000000000000000000000000000000000000000000000000000000000000a4b1
  test merkle verification done
  Signature verified, nonce checked and incremented
  Payment (if any) handled
  Self-call completed, success: true
  Error code from self-call: 0
  Self-call successful, gas used: 157903
  Output intent execution result: 0
  === Output intent execution successful ===
  Friend balance after output intent: 1000
  Output intent verification passed
  settler bytes
  0x
  === _execute called ===
  Combined gas: 1000000
  EOA address: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  About to perform self-call verification
  Payment amount: 0
  Payment max amount: 0
  Payment token: 0x0000000000000000000000000000000000000000
  Payer: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  === selfCallPayVerifyCall537021665 called ===
  Flags: 0
  Intent expiry: 0
  Current timestamp: 1
  Expiry check passed
  Digest computed
  0x
  Funding (if any) handled
  Pre-calls (if any) handled
  === _verifyMerkleSig called ===
  Digest: 74859474678888188617380288673970857584594653592284654112922080803390654359145
  EOA: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  Root: 64951599711642836395008437169926985007912410163784470381469641460806468654311
  Merkle proof valid: true
  Signature valid: true
  test merkle verification
  test merkle verification done
  Signature verified, nonce checked and incremented
  Payment (if any) handled
  Self-call completed, success: true
  Error code from self-call: 0
  Self-call successful, gas used: 361343
  settler bytes
  0x
  === _execute called ===
  Combined gas: 1000000
  EOA address: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  About to perform self-call verification
  Payment amount: 0
  Payment max amount: 0
  Payment token: 0x0000000000000000000000000000000000000000
  Payer: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  === selfCallPayVerifyCall537021665 called ===
  Flags: 0
  Intent expiry: 0
  Current timestamp: 1
  Expiry check passed
  Digest computed
  0x
  Funding (if any) handled
  Pre-calls (if any) handled
  === _verifyMerkleSig called ===
  Digest: 67288666367067667322596237506086925454397762939269763074857257945457438146043
  EOA: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  Root: 64951599711642836395008437169926985007912410163784470381469641460806468654311
  Merkle proof valid: true
  Signature valid: true
  test merkle verification
  test merkle verification done
  Signature verified, nonce checked and incremented
  Payment (if any) handled
  Self-call completed, success: true
  Error code from self-call: 0
  Self-call successful, gas used: 361343
  settler bytes
  0x0000000000000000000000001d1499e622d69689cdf9004d05ec547d650ff21100000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000002105000000000000000000000000000000000000000000000000000000000000a4b1
  === _execute called ===
  Combined gas: 1000000
  EOA address: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  About to perform self-call verification
  Payment amount: 0
  Payment max amount: 0
  Payment token: 0x0000000000000000000000000000000000000000
  Payer: 0x0c774346E7e34e60223C43E51d82d00116D5013d
  === selfCallPayVerifyCall537021665 called ===
  Flags: 0
  Intent expiry: 0
  Current timestamp: 1
  Expiry check passed
  Digest computed
  0x000000000000000000000000a0cb889707d426a7a386870a03bc70d1b0697598000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000004117aa8a0c55843f4be77da2634d95a4516bb348ba9789525c8eabd81f26b9b8e75261d63fe06d49b24fffdec4422d178ca78ed2e8c66e527e78324498767a44551c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000004000000000000000000000000003a6a84cd762d9707a21605b548aaab891562aab00000000000000000000000000000000000000000000000000000000000003e8
  0xa0Cb889707d426A7A386870A03bc70d1b0697598
  0x17aa8a0c55843f4be77da2634d95a4516bb348ba9789525c8eabd81f26b9b8e75261d63fe06d49b24fffdec4422d178ca78ed2e8c66e527e78324498767a44551c
  Number of transfers: 1
  0x00000000000000000000000003a6a84cd762d9707a21605b548aaab891562aab00000000000000000000000000000000000000000000000000000000000003e8
  Self-call completed, success: false
  Error code from self-call: 107754607445026256745304084369920491520965249320562172394255851130079078776832
  Self-call FAILED

Suite result: ok. 1 passed; 0 failed; 0 skipped; finished in 4.44ms (3.33ms CPU time)

Ran 1 test suite in 102.63ms (4.44ms CPU time): 1 tests passed, 0 failed, 0 skipped (1 total tests)
